$(document).ready(function(){var i=$(document).width()<768,e=function(){var t=$(".navbar-toggler"),a=$(".navbar-brand img"),n=$("#navbarNav"),i=$(".main-nav"),s=($("#productsDropdown"),$(".navDropdown"));$("#speak-mic").click(function(e){var t;window.hasOwnProperty("webkitSpeechRecognition")&&((t=new webkitSpeechRecognition).continuous=!1,t.interimResults=!1,t.lang="en-US",t.start(),t.onresult=function(e){$("#speech-input").value=e.results[0][0].transcript,t.stop(),$("#site-mobile-search-form").submit()},t.onerror=function(e){t.stop()})}),t.click(function(e){e.preventDefault(),e.stopPropagation(),$("body").addClass("noscroll"),r(n),n.hasClass("d-none")?($("body").removeClass("noscroll"),66<$(window).scrollTop()?a.attr("src",baseUrl+"img/logo-red.png"):a.attr("src",baseUrl+"img/grote-logo-white.png"),t.find(".navbar-toggler-icon").removeClass("active"),t.find("i").html("menu"),t.find(".text").html("Menu"),n.find("a i.right").addClass("d-none"),i.each(function(e,t){t=$(t);t.off("click"),t.parent().hasClass("d-none")&&t.parent().removeClass("d-none"),t.find("i.left").hasClass("d-none")||t.find("i.left").addClass("d-none"),s.each(function(e,t){u($(t))})}),o.init()):(a.attr("src",baseUrl+"img/logo-red.png"),t.find(".navbar-toggler-icon").addClass("active"),t.find("i").html("close"),t.find(".text").html("Close"),n.find("a i.right").removeClass("d-none"),i.each(function(e,t){var a=$(t);a.off("click"),a.click(function(e){e.preventDefault(),a.find("i.right").hasClass("d-none")?($("#"+a.data("toggle")).addClass("d-none"),a.find("i.right").removeClass("d-none"),a.find("i.left").addClass("d-none"),i.each(function(e,t){t=$(t);t.attr("id")!=a.attr("id")&&t.parent().removeClass("d-none")})):($("#"+a.data("toggle")).removeClass("d-none"),a.find("i.right").addClass("d-none"),a.find("i.left").removeClass("d-none"),i.each(function(e,t){t=$(t);t.attr("id")!=a.attr("id")&&t.parent().addClass("d-none")}))})}))})},o={init:function(){$(".main-nav").each(function(e,t){var a=$(t),n=$("#"+a.attr("data-toggle"));a.click(function(e){e.preventDefault(),r(n)}),document.addEventListener("click",function(e){i||($target=$(e.target),(targetId=$target.attr("id"))===a.attr("id"))||targetId===n.attr("id")||n.find($target).length||u(n)})})}},t=function(){var s=$(".subnavigation ul a"),o=null,r=null,l=$("#subnavDropdown"),c=$("#subfamily"),d=l.find(".data a");s.each(function(e,t){var a=$(t),n=$(t).data("slug"),t=$(t).data("id");t,a.click(function(e){e.preventDefault(),e.stopPropagation(),r=a;var i=$(this).data("id");s.removeClass("active").removeClass("inactive"),l.hasClass("d-none")||r!=o?(o=r,f(),a.addClass("active"),s.not(".active").addClass("inactive"),$.ajax({cache:!1,url:ajaxUrl+"PagesFront/list-sub-categories/"+i,success:function(e){var s,n=[],o=($.each(e,function(e,t){t.sub_cat_id,t.sub_cat_slug;var a=$('<div class="col-auto">').append("<h6>");a.children("h6").append("<a>"),a.find("a").attr("data-subcatlink",t.sub_category_link).attr("data-id",i).attr("data-subcatid",t.sub_cat_id).attr("href","#").text(t.sub_cat_name),n.push(a)}),m(l.find(".data"),n),p(l),null);(d=l.find(".data a")).each(function(e,t){var i=$(t);i.click(function(e){e.preventDefault(),e.stopPropagation(),s=i;var e=$(this).data("id"),t=$(this).data("subcatid"),a=$(this).data("subcatlink"),n=$(this).text();d.removeClass("active").removeClass("inactive"),c.hasClass("d-none")||s!=o?(o=s,i.addClass("active"),d.not(".active").addClass("inactive"),$("div.sub-panel-header-link a span").text(n),$("div.sub-panel-header-link a").attr("href",a),$.ajax({cache:!1,url:ajaxUrl+"productfunctions/families-by-category/"+e+"/"+t,success:function(e){var n=[],i=40<e.length?"col-4":"col-6";$.each(e,function(e,t){var a=$('<li class="'+i+' truncate">').append("<a>");a.children("a").data("imageurl",baseUrl+"images/"+t.small_filename).attr("href",baseUrl+t.tl_cat_slug+"/"+t.sub_cat_slug+"/"+t.family_slug).text(t.family_name),n.push(a)}),m(c.find(".data"),n),p(c),(familySubButtons=c.find("ul a")).each(function(e,t){$(this).hover(function(e){var t=$(this).data("imageurl");c.find("img").attr("src",t)},function(e){c.find("img").attr("src","/img/spacer.gif")})})},fail:function(e){m(c.find(".data"),"<div><div><div><h6>Something went wrong!</h6></div></div></div>"),p(c)}})):(o=s,f(),i.removeClass("active"),d.removeClass("inactive"))})})},fail:function(e){m(l.find(".data"),"<div><div><div><h6>Something went wrong!</h6></div></div></div>"),p(l)}})):(o=r,f(),m(l.find(".data"),""),u(l),a.removeClass("active"),s.removeClass("inactive"))}),document.addEventListener("click",function(e){currentButton=null,e.target.id===l.attr("id")||l.find($(e.target)).length||(r=o=null,f(),m(l.find(".data"),""),u(l),s.removeClass("active").removeClass("inactive"),d.removeClass("active").removeClass("inactive"))})})},a={header:$("header.main"),headerHeight:$("header.main").height(),redLogoPath:baseUrl+"img/grote-logo-red-159x87.png",whiteLogoPath:baseUrl+"img/grote-logo-white-159x87.png",stickyActive:!1,events:function(){$("body").css("padding-top","0px"),$(window).scroll(function(){$(window).scrollTop()>a.headerHeight?(a.header.addClass("sticky-nav"),$("body").css("padding-top",a.headerHeight-20+"px"),a.stickyActive=!0,a.header.find("a.navbar-brand").children("img").attr("src",a.redLogoPath)):(a.header.removeClass("sticky-nav"),a.stickyActive=!1,$("body").css("padding-top","0px"),a.header.find("a.navbar-brand").children("img").attr("src",a.whiteLogoPath))})},init:function(){$("body").hasClass("homepage")||0!=$("#error404").length||a.events()}},r=($("#call-us-header").click(function(e){e.preventDefault(),$("#call-countries").slideToggle(300)}),e(),o.init(),t(),a.init(),function(e){e.toggleClass("d-none")}),u=function(e){e.hasClass("d-none")||e.addClass("d-none")},p=function(e){e.hasClass("d-none")&&e.removeClass("d-none")},m=function(e,t){e.html(t)},f=function(){var e,t=$("#subfamily"),a=t.find("data"),n=t.find("img"),i=(u(t),m(a,""),n),s={src:""};for(e in s)s.hasOwnProperty(e)&&i.attr(e,s[e])},n=($(".owl-carousel").owlCarousel({items:3,startPosition:0,nav:!0,loop:3<$(".owl-carousel").length,margin:20,slideTransition:"linear",navText:['<i class="material-icons">keyboard_arrow_left</i>','<i class="material-icons">keyboard_arrow_right</i>'],stagePadding:10,responsiveClass:!0,dots:!1,responsive:{0:{items:2,nav:!0,center:!0,stagePadding:10,dots:!0},425:{items:2,nav:!0,center:!0,stagePadding:120,dots:!0},500:{items:2,nav:!1,center:!0,stagePadding:130},576:{items:3,nav:!0}}}),$(".owl-carousel").css({opacity:1,transition:"all 0.5s ease-in-out"}),$(".v2-carousel").owlCarousel({items:5,startPosition:0,nav:!0,loop:3<$(".v2-carousel").length,margin:20,slideTransition:"linear",navText:['<i class="material-icons">keyboard_arrow_left</i>','<i class="material-icons">keyboard_arrow_right</i>'],stagePadding:20,responsiveClass:!0,responsive:{0:{items:1,nav:!1,center:!0,stagePadding:30,startPosition:1},425:{items:1,nav:!1,center:!0,stagePadding:30,startPosition:1},500:{items:1,nav:!1,center:!0,stagePadding:125},576:{items:2,nav:!0},768:{items:2,nav:!0},992:{items:5,nav:!0},1200:{items:5,nav:!0}}}),$(".v2-carousel").css({opacity:1,transition:"all 0.5s ease-in-out"}),$(".carousel-pog").owlCarousel({items:1,startPosition:0,nav:!0,loop:0<$(".carousel-pog").length,margin:100,slideTransition:"linear",navText:['<i class="material-icons">keyboard_arrow_left</i>','<i class="material-icons">keyboard_arrow_right</i>'],stagePadding:40,responsiveClass:!0,responsive:{0:{items:1,nav:!1,center:!0},425:{items:1,nav:!1,center:!0},500:{items:1,nav:!1,center:!0},576:{items:1,nav:!0},768:{items:1,nav:!0},992:{items:1,nav:!0},1200:{items:1,nav:!0}}}),{currentResultsCount:0,resultsContainer:$("div#search-results.live-search"),resultsUl:$(".live-search #search-list-products"),lensResult:$("#lens-result"),ajaxLoader:$("#ajax-loader"),searchIcon:$("#search-icon"),searchRequest:null,searchInput:$("#main-search-input"),debounceTimeout:null,debounceTimeoutTime:350,minCharacters:2,currentPanel:"products",searchNavLinks:$("ul#search-type li a"),interPage:1,init:function(){this.searchInput.on("keyup",function(e){n.interPage=1,clearTimeout(n.debounceTimeout),n.debounceTimeout=setTimeout(n.searchEvents,n.debounceTimeoutTime),n.showSearchLoader()}),this.searchInput.on("click",function(e){$(this).val();n.readySearchNav()}),this.resultsContainer.find("i.fa-times").on("click",function(e){e.preventDefault(),n.unReadySearchNav()}),$("ul.search-inactive-tabs").find("i.fa-times").on("click",function(e){e.preventDefault(),n.unReadySearchNav()}),this.closeOnClick(),this.toggleSearchNav()},showSearchLoader:function(){$("div#ajax-loader").removeClass("d-none").css({display:"block"})},hideSearchLoader:function(){$("div#ajax-loader").addClass("d-none").css({display:"none"})},readySearchNav:function(){n.addOverlay(),$("ul.search-inactive-tabs").slideDown(200),n.resultsContainer.show()},unReadySearchNav:function(){$("ul.search-inactive-tabs").slideUp(200),n.closeListItems(),n.closeResults(),n.resultsContainer.hide(),n.removeOverlay()},toggleSearchNav:function(){var t="products";this.searchNavLinks.on("click",function(e){e.preventDefault(),t=$(this).data("search-panel"),n.changeSearchTabs(t)}),$("ul.search-inactive-tabs li a").on("click",function(e){e.preventDefault(),t=$(this).data("search-panel"),n.changeSearchTabs(t)})},changeSearchTabs:function(e){n.showSearchLoader(),n.searchNavLinks.removeClass("search-nav-active"),$("ul.search-inactive-tabs li a").removeClass("active"),n.currentPanel=e,$('#search-type li a[data-search-panel="'+e+'"]').addClass("search-nav-active"),$('ul.search-inactive-tabs li a[data-search-panel="'+e+'"]').addClass("active"),n.updateInputPlaceholder(e),n.debounceTimeout=setTimeout(n.searchEvents,n.debounceTimeoutTime),n.addOverlay()},interchangesPagination:function(){$("ul.interchanges-pagination li").on("click",function(e){e.preventDefault(),$("ul.interchanges-pagination li").removeClass("selected"),$(this).addClass("selected");var t=$(this).children("a").attr("data-interpage");switch(t){case"back":n.interPage--;break;case"forward":n.interPage++;break;default:n.interPage=t}$("a.search-nav-active").trigger("click")})},updateInputPlaceholder:function(e){var t="";switch(e){case"products":t="Search by product name or number...";break;case"tech-specs":t="Search by an attribute or technical specification...";break;case"info-pages":t="Search for informational content...";break;case"interchanges":t="Search by other catalog number..."}$("#main-search-input").attr("placeholder",t)},searchEvents:function(){n.resultsContainer.show(),n.ajaxLoader.removeClass("d-none"),$("#search-results").scrollTop(0,0);var e,t=n.searchInput.val();return!(t.length>=n.minCharacters)||(e={csrf_grote_token:$("#csrf-site-search").val(),searchTerm:t,curPanel:n.currentPanel,interPage:n.interPage},t.length<3&&"interchanges"!==n.currentPanel)||t.length<2&&"interchanges"===n.currentPanel?(n.ajaxLoader.addClass("d-none"),n.closeListItems(),n.closeResults(),n.resultsContainer.hide(),!1):void $.post(ajaxUrl+"search/run",e,function(e){var t,a=JSON.parse(e);if("fail"==a.status)return n.ajaxLoader.addClass("d-none"),n.closeListItems(),n.closeResults(),n.resultsContainer.hide(),!1;switch(n.decideTransition(n.currentResultsCount,a.resultCount)){case"openContainer":n.addOverlay(),n.updateHTMLMarkup(a.panelMarkup),n.openResults(),n.openListItems(),n.ajaxLoader.addClass("d-none"),$("div#search-results").css({height:"720px"});break;case"closeContainer":n.updateHTMLMarkup(""),n.closeListItems(),n.closeResults(),n.resultsContainer.hide(),n.ajaxLoader.addClass("d-none"),n.removeOverlay();break;case"switchResults":n.updateHTMLMarkup(a.panelMarkup),n.openListItems(),n.ajaxLoader.addClass("d-none"),$("div#search-results").css({height:"720px"})}"interchanges"===n.currentPanel&&n.interchangesPagination(),$("ul#search-type li span.result-indicator").remove(),0<a.productCount&&(t=$("<span>").addClass("result-indicator").text(a.productCount),$("ul#search-type li").eq(1).append(t)),0<a.otherCount&&(t=$("<span>").addClass("result-indicator").text(a.otherCount),$("ul#search-type li").eq(2).append(t)),0<a.interchangesCount&&(t=$("<span>").addClass("result-indicator").text(a.interchangesCount),$("ul#search-type li").eq(3).append(t))})},updateHTMLMarkup:function(e){n.resultsUl.children("li").remove(),n.lensResult.html("").addClass("d-none");var t,a=n.searchInput.val();isNaN(a)||(t='<form id="lens-search-form" action="'+ajaxUrl+'search/find/lens" method="post"><div class="col-12"><p>Need help identifying your product? <a id="lens-search" href="#">Search for lens number '+a+'.</a></p><input type="hidden" name="oss_search_input" value="'+a+'"><input type="hidden" name="csrf_grote_token" value="'+$("#csrf-site-search").val()+'"></div></form>',a.length<5&&n.lensResult.removeClass("d-none").append(t)),$("a#lens-search").off(),$("a#lens-search").on("click",function(e){e.preventDefault(),$("form#lens-search-form").submit()}),$("div#search-results div.search-panels ul li").remove(),$("div#search-results div.search-panels ul#search-list-"+n.currentPanel).append(e)},decideTransition:function(e,t){return"openContainer"},closeOnClick:function(){$("body").on("click",function(e){var t=!1;1===$(e.target).closest("#search-results").length&&(t=!0),1===$(e.target).closest("div.search-box").length&&(t=!0),(t=1===$(e.target).closest(".search-inactive-tabs").length?!0:t)||(n.currentResultsCount=0,n.closeResults(),n.closeListItems(),n.ajaxLoader.addClass("d-none"),n.unReadySearchNav())})},openResults:function(){n.resultsContainer.addClass("open").removeClass("closed d-none"),n.resultsUl.children("li").addClass("open").removeClass("closed")},closeResults:function(){n.resultsContainer.addClass("closed d-none").removeClass("open"),n.resultsUl.children("li").addClass("closed").removeClass("open"),n.resultsContainer.hide()},addOverlay:function(){$("#overlay").removeClass("d-none"),$("#mask").removeClass("d-none")},removeOverlay:function(){$("#overlay").addClass("d-none"),$("#mask").addClass("d-none")},closeListItems:function(){n.resultsUl.children("li").addClass("closed").removeClass("open")},openListItems:function(){n.resultsUl.children("li").addClass("open").removeClass("closed")}}),l=(i||n.init(),{onLoadEvents:function(){$("button.show-more").on("click",function(e){e.preventDefault();var t=$(this),a={csrf_grote_token:$("#csrf-site-search").val(),type:t.data("moretype"),searchTerm:t.data("searchterm"),currentPage:t.data("currentpage"),productType:t.data("producttype")};$.post(ajaxUrl+"/search/load-more-results",a,function(e){var s,o,e=JSON.parse(e);"success"===e.status&&(e.rowCount<3?t.hide():t.show(),s="",o=t.data("moretype"),s+='<div class="row results lens-search">\n',$.each(e.results,function(e,t){var a,n,i;t.main_image_url||(t.main_image_url=ajaxUrl+"/img/no-image.png"),"1"!==t.is_obsolete?(a="products"===o?t.product_number:t.family_name,n="products"===o?"prod-id":"family-name",i="lenses"===t.product_type,s=(s=(s+='<div class="col-12 col-md-4 item">\n')+(i?'<a data-productid="'+t.product_id+'" data-productnumber="'+t.product_number+'" class="lens-match" href="#">\n':'<a href="'+t.url+'">\n'))+'<div class="img-wrapper"><img src="'+t.main_image_url+'"></div>\n',"products"===o?i?s+='<p class="family-name">'+t.product_number+" - <strong>"+t.output_title+"</strong></p>\n":s=(s+='<p class="prod-id">'+t.product_number+"</p>\n")+'<p class="family-name">'+t.family_name+" - "+t.output_title+"</p>\n":s+='<p class="'+n+'">'+a+"</p>\n",s+="</a>\n</div>\n"):(i=l.getReplacementTypeText(t.obs_replacement_type),a="products"===o?t.product_number:t.family_name,s=(s=(s+='<div class="col-12 col-md-4 item replacement-items obsolete-product"><div class="row"><div class="col-12">')+'<div class="img-wrapper"><img class="main-image" src="'+t.main_image_url+'"></div>\n</div>')+'<div class="col-12 replacement-text"><p class="mt-3"><strong>'+i+"</strong></p></div></div>","prod-id"==(n="products"===o?"prod-id":"family-name")?(s=(s+='<div class="row"><div class="col-6">')+'<p class="'+n+'">'+a+"</p>\n</div>",t.obs_replacements&&"no_replacement"!==t.obs_replacement_type?(s+='<div class="col-6">',$.each(t.obs_replacements,function(e,t){s=(s+='<div class="row replacement-row"><div class="col">')+'<p class="truncate"><a href="'+t.url+'">'+t.product_number+" - "+t.family_name+"</a></p></div></div>"}),s+="</div>"):s=(s+='<div class="col-6"><div class="replacement-row">')+'<p class="truncate"><a href="'+baseUrl+t.tl_cat_slug+"/"+t.sub_cat_slug+"/"+t.family_slug+'">'+t.family_name+"</a></p></div></div>",s+="</div>"):s+='<p class="'+n+'">'+a+"</p>\n",s+="</div>")}),s+="</div>\n",t.before(s),e=parseInt(t.data("currentpage")),updatedPage=e+1,t.data("currentpage",updatedPage),"lenses"===a.productType)&&l.lensMatchedProducts()})})},getReplacementTypeText:function(e){var t="";switch(e){case"no_replacement":t="This product is obsolete. View products in the same category:";break;case"true_replacement":t="This product has been replaced by the following:";break;default:t="This product is obsolete. We recommend the following:"}return t},lensMatchedProducts:function(){$("a.lens-match").off(),$("a.lens-match").on("click",function(e){e.preventDefault(),$("a.lens-match").each(function(e,t){$(t).removeClass("selected")}),$(this).addClass("selected");var e={csrf_grote_token:$("#csrf-site-search").val(),productID:$(this).data("productid")},t=$(this).data("productnumber");$.post(ajaxUrl+"/search/match-lens-products",e,function(e){e=JSON.parse(e);"success"===e.status&&($("#matched-lens-products #matched-products").children().remove(),$.each(e.data,function(e,t){HTML="",HTML=(HTML=(HTML=(HTML=(HTML+='<div class="col-4 item">\n')+'<a href="'+t.url+'">\n')+'<div class="img-wrapper"><img src="'+t.main_image_url+'"></div>\n')+'<p class="prod-id">'+t.product_number+"</p>\n")+'<p class="family-name">'+t.family_name+" - <strong>"+t.output_title+"</strong></p>\n</a>\n</div>\n",$("#matched-lens-products #matched-products").append(HTML)}),$("#matched-lens-products span.matching-number").text("#"+t),$([document.documentElement,document.body]).animate({scrollTop:$("#matched-products").offset().top},1e3))})})},init:function(){this.onLoadEvents(),this.lensMatchedProducts()}}),s=($("body").hasClass("search-page-template")&&l.init(),{vehicleID:null,hotspotID:null,selectVehicle:function(){$("ul#select-items li a").on("click",function(e){e.preventDefault(),s.reset(),$(this).closest("ul").find("a").removeClass("selected"),$(this).addClass("selected"),s.vehicleID=$(this).data("vehicleid"),s.switchMainHotspotImage()})},switchMainHotspotImage:function(){$("div.hotspot-image").off(),$("div.hotspot-image").fadeOut(200,function(){setTimeout(function(){$("div.hotspot-image#image-vehicle-id-"+s.vehicleID).fadeIn(400)},300)})},selectHotspot:function(){$("div.hotspot-image span.hotspot").on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass("selected"),s.hotspotID=$(this).data("hotspotid"),s.changePanel()})},changePanel:function(){$("ul.compatible-products").fadeOut(200,function(){setTimeout(function(){$("#compatible-products-match-v"+s.vehicleID+"-hs"+s.hotspotID).fadeIn(400),$("div#products-slider div.owl-carousel").hide(),$("div#products-slider div.owl-carousel.compatible-carousel-match-v"+s.vehicleID+"-hs"+s.hotspotID).show()},300)})},reset:function(){s.vehicleID=null,s.hotspotID=null,$("ul.compatible-products").first().is(":visible")||$("ul.compatible-products").fadeOut(200,function(){setTimeout(function(){$("ul.compatible-products").first().fadeIn(400)},300)}),$("div.hotspot-image span.hotspot").removeClass("selected")},init:function(){this.selectVehicle(),this.changePanel(),this.selectHotspot(),this.reset(),$("ul#select-items li").first().children("a").trigger("click"),$("ul.compatible-products").first().fadeIn(400)}}),c=(s.init(),{pageNumber:0,loadMoreLink:$("a#load-more"),postType:$("a#load-more").data("posttype"),loadMore:function(){this.loadMoreLink.on("click",function(e){e.preventDefault(),c.pageNumber=c.pageNumber+1,c.getResults()})},getResults:function(){var e={csrf_grote_token:$("#csrf-site-search").val(),pageNumber:c.pageNumber,postType:c.postType};$.post(ajaxUrl+"PagesFront/fetch_more_posts",e,function(e){e=JSON.parse(e);if("success"!==e.status)return!1;c.generateMarkup(e),e.more_available||c.loadMoreLink.addClass("d-none")})},generateMarkup:function(e){e=e.data;$("#latest-news .card-deck").length;$.each(e,function(e,t){var a="",a=(t.news_item.headerimage.full_filename&&0<t.news_item.headerimage.full_filename.length?t.news_item.headerimage:t.news_item.featimg).full_filename,a=ajaxUrl+"images/"+a,n=(n=(n=(n=(n=(n=(n=(n=(n="")+'<div class="card mb-4">\n'+'<div class="img-wrapper">\n')+('<span class="helper"></span><a href="'+baseUrl+"news/"+t.page_slug+'"><img src="'+a+'" class="card-img-top"></a>\n'))+"</div\n>"+'<div class="card-body">\n')+('<a href="'+baseUrl+"news/"+t.page_slug+'"><h6 class="card-title">'+t.page_title+"</h6></a>\n")+'<p class="card-text">\n')+(t.news_item.wysi.module_content+"\n")+"</p>\n")+"</div>\n"+'<div class="card-footer">\n')+('<a href="'+baseUrl+"news/"+t.page_slug+'">View Article <i class="material-icons">keyboard_arrow_right</i></a>\n')+"</div>\n")+"</div>\n"+'<div class="w-100 d-block d-md-none"></div> \x3c!-- Break every card on the smallest screen --\x3e\n';"odd"==(e%2==0?"even":"odd")&&(n+='<div class="w-100 d-none d-md-block"></div>'),$("#latest-news .card-deck").append(n)})},init:function(){this.loadMore()}}),d=(c.init(),{pageNumber:0,loadMoreLink:$("a#load-more-new-products"),loadMore:function(){this.loadMoreLink.on("click",function(e){e.preventDefault(),d.pageNumber=d.pageNumber+1,d.getResults()})},getResults:function(){var e={csrf_grote_token:$("#csrf-site-search").val(),pageNumber:d.pageNumber};$.post(ajaxUrl+"PagesFront/fetch_more_new_products",e,function(e){e=JSON.parse(e);if("success"!==e.status)return!1;d.generateMarkup(e),e.more_available||d.loadMoreLink.addClass("d-none")})},generateMarkup:function(e){e=e.data;$("#latest-news .card-deck").length;$.each(e,function(e,t){var a="",a=(a=(a=(a=(a=(a+='<div class="product-item-wrapper col-md-3 col-6 mb-4">\n')+('<a class="product-item" title="'+t.family_name+'" href="'+t.url+'">\n')+'<div class="product-image-boxed">\n')+('<img src="'+t.new_image+'" alt="">\n')+"</div>\n")+'<div class="product-filters-meta">\n'+('<p class="product-number">'+t.product_number+"</p>\n"))+('<p class="output-title">'+t.output_title+"</p>\n")+"</div>\n")+"</a>\n"+"</div>\n";$("#results .new-products").append(a)})},init:function(){this.loadMore()}}),h=(d.init(),{qaForm:$("#post-knowledgebase-question"),output:$("#qa-output-responder"),consentInfoBtn:$("#consent-info-btn,#consent-info-btn-2, #consent-info-btn-3"),consentNotice:$(".consent-info"),ajaxLoader:$(".qa-loader"),showForm:function(){$("a.submit-qa").on("click",function(e){e.preventDefault(),$(".qa-form-wrapper").is(":visible")?$(".qa-form-wrapper").slideUp(300):$(".qa-form-wrapper").slideDown(300)})},processForm:function(){this.qaForm.on("submit",function(e){e.preventDefault(),h.ajaxLoader.show();e={csrf_grote_token:$("#qa-csrf").val(),uQuestion:$("#qa-question").val(),uName:$("#qa-name").val(),uEmail:$("#qa-email").val(),uPhone:$("#qa-phone").val(),recaptcha:$("#g-recaptcha-response").val()};$("#consent").is(":checked")&&(e.consent=!0),$.post(ajaxUrl+"UserActions/post-question",e,function(e){e=JSON.parse(e);h.consentNotice.is(":visible")&&h.consentNotice.slideUp(300),h.output.children("p").remove(),"success"===e.status?(h.output.append("<p>"+e.message+"</p>"),h.output.css({"background-color":"rgb(111, 222, 110)",color:"#fff"}),h.qaForm.find("input#qa-submit").slideUp(100)):$.each(e.message,function(e,t){h.output.css("background-color","#FF867C"),h.output.append("<p>"+t+"</p>")}),h.output.slideDown(200,function(){h.ajaxLoader.hide()})})})},gdprInfo:function(){h.consentInfoBtn.on("click",function(){h.consentNotice.is(":visible")?h.consentNotice.slideUp(300):h.consentNotice.slideDown(300)})},addCsrfSearch:function(){var e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#qa-csrf").val());$("form#qa-search").append(e)},init:function(){this.showForm(),this.processForm(),this.gdprInfo(),0<$("form#qa-search").length&&this.addCsrfSearch()}}),v=(h.init(),{btns:$(".btn-toolbar .btn"),title:$(".row.questions h5"),questions:$(".row.questions ul"),init:function(){this.btns.each(function(e,t){$(t).click(function(e){e.preventDefault(),v.btns.removeClass("disabled"),$(this).addClass("disabled");e=e.target.innerText;document.location=document.location.origin+"/knowledge-base/view-all/"+e.toLowerCase()})}),this.filterKnowledge()},filterKnowledge:function(){$("#knowledge-base-filter").off("keyup"),$("#knowledge-base-filter").keyup(function(e){e.key;13==e.which&&e.preventDefault();var n=$(this).val(),i=n.toLowerCase(),e=v.questions.find("li");0<n.length?(e.hide(),e.each(function(e){var t=$(this).find("a").text(),a=t.toLowerCase();-1===t.indexOf(n)&&-1===a.indexOf(i)||$(this).closest("li").show()})):e.show()})}}),g=($("#knowledgebase-view-all").length&&v.init(),{searchInput:$("#qa-search"),debounceTimeout:null,debounceTimeoutTime:350,minCharacters:3,events:function(){g.searchInput.on("keyup",function(){clearTimeout(g.debounceTimeout),g.debounceTimeout=setTimeout(g.searchEvents,g.debounceTimeoutTime)})},searchEvents:function(){var t,a,e=$("#qa-search-input").val();e.length>=g.minCharacters&&(t=$("#qa-search-results"),a=$("#qa-list-items"),e={csrf_grote_token:$("#csrf-site-search").val(),kb_search_term:e},$.post(ajaxUrl+"search/search-knowledge-base",e,function(e){var n,e=JSON.parse(e);"success"===e.status&&0<e.resultCount?(n=[],$.each(e.results,function(e,t){var a=$("<li>"),t=$("<a>").text(t.qa_title).attr("href",t.url);a.append(t),n.push(a)}),a.children("li").remove(),a.append(n),t.show()):(a.children("li").remove(),t.hide())}))},init:function(){this.events()}}),b=(g.init(),{productsContainer:$("div.list-filtered-products"),filtersContainer:$("div.product-filters"),currentPage:0,clearAllButton:$("a#clear-all"),currentSelectedFilters:[],currentTopCategory:null,currentSubCategory:null,showMoreButton:$("#show-more"),nothingFound:$("#nothing-found-container"),filterPageType:$("div.filter-type").data("filterpagetype"),ajaxLoaderImage:$("img#ajax-filter-loader"),loadMoreAjaxImage:$("#load-more-ajax-image"),filterAllSubCatSelectorID:0,queryType:"family",mobileFiltersBtn:$("#mobile-filters-btn"),mobileFilters:$(".mobile-filters"),allFilterIDS:$(".mobile-filters .options a"),categoryClick:function(){},openCategoryFilters:function(){$("#filtering").removeClass("d-none")},setMobileFilters:function(){b.mobileFiltersBtn.click(function(e){e.preventDefault(),b.addOverlay(),$("body").addClass("noscroll"),b.mobileFilters.removeClass("d-none")})},setMobileFilterClicks:function(){$(".mobile-filters .selected-filters").on("click","a",function(e){e.preventDefault();e=$(this).parent().data("facetid");$('.mobile-filters .options a[data-facetid="'+e+'"]').trigger("click"),$(this).parent().remove(),b.removeFromCurrentFilters(this),b.updateSelection(e,"remove")}),$(".mobile-filters .options .button.filter-option").click(function(e){e.preventDefault();var e=$(this),t=e.data("facetid"),a=e.text();if(e.parent("li").hasClass("disabled"))return!1;e.prev().hasClass("selected")?(e.prev().removeClass("selected"),b.removeFromCurrentFilters(this),b.updateSelection(t,"remove"),$(".mobile-filters .selected-filters").find("[data-facetid="+t+"]").remove(),e.parent("li").siblings("li").children("a").removeAttr("disabled").prop("disabled",!1),e.parent("li").removeClass("selected"),e.parent("li").siblings("li").removeClass("disabled")):(e.prev().addClass("selected"),b.addToCurrentFilters(this),b.updateSelection(t,"add"),e.parent("li").addClass("selected"),e.parent("li").siblings("li").addClass("disabled"),e.parent("li").siblings("li").children("a").attr("disabled",!0).prop("disabled",!0),t='<span data-facetid="'+t+'">'+a+'<a href="#" class="selected-close"><i class="fas fa-times-circle"></i></a></span>',$(".mobile-filters .selected-filters div").append(t)),e.closest(".row.filter-option").find(".shrink").trigger("click")}),$(".mobile-filters .clear-all").click(function(e){e.preventDefault(),$(".mobile-filters .selected-filters span").each(function(e,t){t=$(t).data("facetid");$(".mobile-filters .options [data-facetid="+t+"]").prev().removeClass("selected")}),$(".mobile-filters .selected-filters span").remove(),$(".mobile-filters .options .button.filter-option").removeClass("disabled"),$(".mobile-filters .options .button.filter-option").parent("li").removeClass("disabled").removeClass("selected"),$(".mobile-filters .options .button.filter-option").siblings("i").removeClass("selected"),$(".mobile-filters").find(".row.filter-option").find(".shrink").trigger("click"),setTimeout(function(){b.currentPage=0,b.currentSelectedFilters=[],b.filterAllSubCatSelectorID=0,$("#switch-category-filter-all").val(0).change(),b.makeXHRRequest(b.currentSelectedFilters)},100)}),$(".mobile-filters .apply").click(function(e){e.preventDefault(),b.closeMobileFilters()})},closeMobileFilters:function(){b.removeOverlay(),$("body").removeClass("noscroll"),b.mobileFilters.addClass("d-none")},addOverlay:function(){$("#overlay").removeClass("d-none")},removeOverlay:function(){$("#overlay").addClass("d-none")},setEvents:function(){this.toggleFilters(),"filter-all"===this.filterPageType&&this.filterAllEvents();var e=$("div.filter-type");"category-page"===e.data("filterpagetype")&&(b.currentTopCategory=e.data("topcategoryid"),b.currentSubCategory=e.data("subcategoryid")),$("#switch-query-type").on("change",function(){b.queryType=$(this).val(),b.makeXHRRequest(b.currentSelectedFilters),b.buildDynamicFacetingLists(b.currentTopCategory)})},clearResults:function(){b.productsContainer.find("div.append-container").fadeOut("fast",function(){b.productsContainer.find("a.product-item").remove()})},clearSiblingFilters:function(e,t){var a=e.find("li.selected"),n=a.children("a"),i=n.data("facetid"),a=(a.find("i").remove(),b.removeFromCurrentFilters(n),$.inArray(i,b.currentSelectedFilters));~a&&b.currentSelectedFilters.splice(a,1),e.children("li").removeClass("selected")},toggleFilters:function(){b.filtersContainer.find("div.options").find("a.button").off(),b.filtersContainer.find("div.options").find("a.button").on("click",function(e){e.preventDefault();e=$(this).data("facetid");if($(this).parent().hasClass("selected"))$(this).parent().removeClass("selected"),$(this).find("i").remove(),b.removeFromCurrentFilters(this),b.updateSelection(e,"remove");else{if($(this).hasClass("disabled"))return;var t=$(this).closest("ul");b.clearSiblingFilters(t,this),$(this).parent().addClass("selected"),$(this).prepend('<i class="fa fa-check"></i>'),b.addToCurrentFilters(this),b.updateSelection(e,"add")}$(this).closest(".row.filter-option").find(".shrink").trigger("click"),b.currentPage=0}),$(".current-filters").on("click","a",function(e){e.preventDefault();var e=$(this).data("facetid"),t=$('.options a[data-facetid="'+e+'"]');t.parent().removeClass("selected"),t.find("i").remove(),b.removeFromCurrentFilters(this),b.updateSelection(e,"remove")})},updateSelection:function(e,t){"add"===t?b.currentSelectedFilters.push(e):"remove"===t&&~(t=$.inArray(e,b.currentSelectedFilters))&&b.currentSelectedFilters.splice(t,1),b.currentPage=0,this.productsContainer.find("a.product-item").fadeOut(300),b.makeXHRRequest(b.currentSelectedFilters)},loadMore:function(){b.showMoreButton.on("click",function(e){b.loadMoreAjaxImage.show(),e.preventDefault(),b.currentPage++,b.makeXHRRequest(b.currentSelectedFilters)})},filterAllEvents:function(){$("body").hasClass("filter-all-products")&&($("a.top-level-filter-option").on("click",function(e){e.preventDefault(),$("a.top-level-filter-option").removeClass("selected"),$(this).addClass("selected");e=$(this).data("topcatid");b.currentTopCategory=e,b.buildDynamicFacetingLists(e),b.currentPage=0,b.filterAllSubCatSelectorID=0,b.currentCategory=e,b.queryType="product",b.filterAllDynamicSubCategories(e),b.makeXHRRequest(b.currentSelectedFilters),$("#filtering").slideDown(300,function(){$(this).removeClass("d-none")})}),$("#switch-category-filter-all").on("change",function(){b.currentPage=0,b.filterAllSubCatSelectorID=$(this).val(),b.makeXHRRequest(b.currentSelectedFilters)}))},filterAllDynamicSubCategories:function(e){var a,t=$("#switch-category-filter-all");t.children("option").remove(),e[0]&&(a='<option value="0">All Sub-Categories</option>',$.each(e,function(e,t){a+='<option value="'+t.sub_cat_id+'">'+t.sub_cat_name+"</option>"}),t.append(a))},buildDynamicFacetingLists:function(e){var t={csrf_grote_token:$("#csrf-site-search").val(),topCatID:b.currentTopCategory,subCatID:b.currentSubCategory,pageType:b.filterPageType};$.post(ajaxUrl+"/productfunctions/get-dynamic-faceting",t,function(e){var a,e=JSON.parse(e),t=$("div.product-filters");t.find(".filter-option").remove(),"success"===e.status&&(b.filterAllDynamicSubCategories(e.subCats),a="",e.facets&&$.each(e.facets,function(e,t){if("family"===b.queryType&&!$.inArray(t.att_top_slug,["testing-ignore"]))return!0;"LED"==t.att_top_name?(a+='<div class="row filter-option mt-5"><div class="col-12"><div class="row"><div class="options col-auto mr-auto">',t.sub_facets&&(a+="<ul>",$.each(t.sub_facets,function(e,t){a+='<li><a href="#" data-facetid="'+t.att_sub_id+'" class="button filter-option">'+t.att_sub_name+" only</a></li>"}),a+="</ul>"),a+="</div></div></div></div>"):(a+='<div class="row border-shadow filter-option mt-5"><div class="col-11"><div class="row"><div class="filter-option collapsible col-auto mr-auto">'+t.att_top_name+'</div><div class="col-auto"><a href="#" class="expand">+</a></div></div><div class="expandItem row hide"><div class="options col-auto"><ul>',t.sub_facets&&$.each(t.sub_facets,function(e,t){a+='<li><a href="#" data-facetid="'+t.att_sub_id+'" class="button filter-option">'+t.att_sub_name+"</a></li>"}),a+="</ul></div></div></div></div>")}),t.append(a),t.fadeIn(200),$(".list-filtered-products").fadeIn(200),b.initFacets(),b.toggleFilters())})},initFacets:function(){$("div.filter-option").on("click","a.expand",function(e){e.preventDefault(),$(this).removeClass("expand").addClass("shrink"),$(this).html("&mdash;"),$($(this).parent().parent().siblings(".expandItem")[0]).removeClass("hide").addClass("show")}),$("div.filter-option").on("click","a.shrink",function(e){e.preventDefault(),$(this).removeClass("shrink").addClass("expand"),$(this).html("+"),$($(this).parent().parent().siblings(".expandItem")[0]).removeClass("show").addClass("hide")}),b.hideEmptyFilters()},hideEmptyFilters:function(){var e=$("div#filters > div.filter-option");$.each(e,function(e,t){0===$(this).find(".options").find("li").length&&$(this).remove()})},makeXHRRequest:function(e){b.ajaxLoaderImage.fadeIn(100),b.showMoreButton.hide(),"category-page"===this.filterPageType&&(b.productsContainer.fadeIn(200),b.filtersContainer.fadeIn(200));var a=[],e=($.each(b.allFilterIDS,function(e,t){a.push($(this).data("facetid"))}),{csrf_grote_token:$("#csrf-site-search").val(),filters:e,currentCategory:"filter-all"===b.filterPageType?b.currentTopCategory:$("#tpl-sub-category").data("subcategoryid"),currentPage:b.currentPage,filterType:b.filterPageType,filterAllSelectFieldID:b.filterAllSubCatSelectorID,queryType:$("ul.by-type a.selected").data("typefilter"),facetIDs:a,topCat:$("#tpl-sub-category").data("topcategoryid")||b.currentCategory,subCat:$("#tpl-sub-category").data("subcategoryid")||b.filterAllSubCatSelectorID,filterProductType:$("ul.by-type a.selected").data("typefilter")});$.post(ajaxUrl+"/productfunctions/category-ajax-filter",e,function(e){var t=JSON.parse(e);"success"===t.status&&b.nothingFound.fadeOut(300,function(){0==t.pageCount?b.productsContainer.find("div.append-container").fadeOut("fast",function(){b.productsContainer.find("a.product-item").remove(),$("div.append-container").children().remove(),$("div.append-container").append(t.results),$("div.append-container").fadeIn("fast"),C.productsCompare(),C.checkboxEvents(),C.setCheckboxStates(),18==t.productCount?b.showMoreButton.show():b.showMoreButton.hide(),b.loadMoreAjaxImage.hide()}):(b.productsContainer.find("div.append-container").append(t.results),18==t.productCount?b.showMoreButton.fadeIn(300):b.showMoreButton.fadeOut(300),b.loadMoreAjaxImage.hide(),C.productsCompare(),C.checkboxEvents(),C.setCheckboxStates()),b.ajaxLoaderImage.fadeOut(100),b.loadMoreAjaxImage.hide(),$("body").hasClass("filter-all-products")||b.updateSubFilterStates(t.allowedFilters)}),"zero"===t.status&&(b.noResultsFound(),b.ajaxLoaderImage.fadeOut(100),$("#load-more-ajax-image").hide()),"fail"===t.status&&(b.ajaxLoaderImage.fadeOut(100),$("#load-more-ajax-image").hide())})},noResultsFound:function(){0<b.currentPage||($("div.list-filtered-products").find("div.append-container").find("a.product-item").remove(),b.nothingFound.fadeIn(300),b.showMoreButton.hide(),b.currentPage=0)},clearAll:function(){$("a#clear-all").on("click",function(e){e.preventDefault(),$(".options .selected").removeClass("selected").find("i").remove(),$(".current-filters li").remove(),setTimeout(function(){$(".append-container .row").remove(),b.currentPage=0,b.currentSelectedFilters=[],b.filterAllSubCatSelectorID=0,$("#switch-category-filter-all").val(0).change(),b.makeXHRRequest(b.currentSelectedFilters)},100)})},addToCurrentFilters:function(e){e='<li><a href="#" data-facetid="'+$(e).data("facetid")+'">'+$(e).text()+' <i class="fas fa-times-circle"></i></a></li>';1==$(".current-filters ul li").length&&""==$(".current-filters ul li").text()&&$(".current-filters ul li").remove(),$(".current-filters ul").append(e)},removeFromCurrentFilters:function(e){e=$(e).data("facetid");$('.current-filters a[data-facetid="'+e+'"]').parent().remove(),0==$(".current-filters ul li").length&&$(".current-filters ul").append("<li></li>")},updateSubFilterStates:function(a){var e=$("div.filter-option").find("a.filter-option, .options");e&&$.each(e,function(e,t){-1===a.indexOf($(this).data("facetid"))?$(this).parent("li").hasClass("selected")||$(this).addClass("disabled"):$(this).removeClass("disabled")}),$("div.options ul li.selected").each(function(e,t){$(this).siblings("li").children("a").addClass("disabled")}),$(".mobile-filters .filter-option .options a.filter-option").each(function(e,t){-1===a.indexOf($(this).data("facetid"))?$(this).parent("li").hasClass("selected")||($(this).addClass("disabled"),$(this).parent("li").addClass("disabled")):($(this).removeClass("disabled"),$(this).parent("li").removeClass("disabled"))}),$(".mobile-filters .filter-option .options li.selected").each(function(e,t){$(this).siblings("li").children("a").addClass("disabled")})},types:function(){$("ul.by-type li a").on("click",function(e){e.preventDefault(),$(this).parent("li").siblings("li").children("a").removeClass("selected").children("i").remove(),$(this).addClass("selected");e=$("<i>").addClass("fa").addClass("fa-check"),$(this).prepend("&nbsp;"),$(this).prepend(e),e={csrf_grote_token:$("#csrf-site-search").val(),typeFilter:$(this).data("typefilter")};$.post(ajaxUrl+"/productfunctions/set-types-filter",e,function(e){"success"===JSON.parse(e).status&&location.reload()})})},init:function(){b.currentPage=0,b.currentSelectedFilters=[],"yes"!==$("#results").data("loadfirstnine")&&b.makeXHRRequest(b.currentSelectedFilters)},onReady:function(){($("body").hasClass("sub-category-template")||$("body").hasClass("filter-all-products"))&&(b.setMobileFilters(),b.setMobileFilterClicks(),b.setEvents(),b.loadMore(),b.clearAll(),b.initFacets(),b.types(),b.init()),b.categoryClick()}}),C=(b.onReady(),{$productSpecs:$("#product-specs"),$selectedProduct:$("#selected-product"),$products:$("#products"),currentlyShowingImage:"main-image",featuredImageContainers:$("#featured-imagery > div"),ajaxImg:$("#ajax-loader"),compareIDs:compareArray||[],productThumbnails:function(){var e=$("ul#img-options li"),a=($("#featured-imagery > div"),$("#ajax-loader"));e.off(),e.on("click",function(e){e.preventDefault();var t=$(this).children("img").data("imagetype");if(C.currentlyShowingImage===t)return!1;a.show(),$("#featured-imagery > div#"+C.currentlyShowingImage).stop(!0,!0).fadeOut(200,function(){C.currentlyShowingImage=t,$("#featured-imagery > div#"+t).fadeIn(350,function(){"three-sixty"===t&&$("#featured-imagery img.three-sixty-image").trigger("click").css("opacity",1),a.hide()})})})},replacementsNext:function(){$("a.next").on("click",function(e){e.preventDefault(),$(this).closest("#replacements").find("button.owl-next").trigger("click")})},defaultID:$("#products > ul > li > a > div.selected").closest("li").data("productid"),originalImage:$("div#featured-imagery img.main-img").attr("src"),originalProductNumber:$("h3.product-title").html(),originalOutputTitle:$("h3.product-title span").text(),hasChanged:0,setHover:function(){C.$products.find("ul li").each(function(e,t){($el=$(t)).hover(function(e){var t=($tar=$(this)).data("fullsizeimg"),a=$tar.data("outputtitle"),n='<h3 class="mb-0 product-title">'+$tar.data("productnumber")+"<span>"+$tar.data("outputtitle")+"</span></h3>",n=55<a.length?'<h3 class="mb-0 product-title smaller-title">'+$tar.data("productnumber")+"<span>"+$tar.data("outputtitle")+"</span></h3>":'<h3 class="mb-0 product-title">'+$tar.data("productnumber")+"<span>"+$tar.data("outputtitle")+"</span></h3>",a=(C.removeHoverSelection(),$tar.find("a div.row").addClass("selected"),C.$productSpecs.find("h3").parent("div"));a.children("h3").remove(),a.append(n),C.$selectedProduct.find("#product img.main-img").attr("src",t)},function(){$("img.main-img").attr("src",C.originalImage);var e=$("section#product-specs").find("h3.product-title").parent("div"),t=($("section#product-specs").find("h3.product-title").remove(),e.children("h3").remove(),$("<h3>").addClass("mb-0").addClass("product-title").html(C.originalProductNumber));55<C.originalOutputTitle.length&&t.addClass("smaller-title"),e.append(t),$("div#products > ul > li > a > div").removeClass("selected"),$('div#products > ul > li[data-productid="'+C.defaultID+'"]').children("a").children("div").addClass("selected")})})},setProductClicks:function(){$("#products li a, #products-mobile div.owl-carousel a").on("click",function(e){e.preventDefault(),$("#ajax-image-loader").show(),C.$productSpecs.addClass("loading");var e=($tar=$(this)).attr("href"),t=$tar.find("img.product-thumbnail").attr("alt"),e=($("#main-image img.main-img").attr("alt",t),window.history.pushState("","",e),C.removeHoverSelection(),$tar.find("div.row").addClass("selected"),t=($tar.parent().hasClass("owl-item")?$tar:$tar.parent("li")).data("productid"),C.originalImage=$("div#featured-imagery img.main-img").attr("src"),C.originalProductNumber=$("h3.product-title").html(),C.originalOutputTitle=$("h3.product-title span").text(),C.defaultID=$("#products > ul > li > a > div.selected").closest("li").data("productid"),{csrf_grote_token:$("#csrf-products").val(),familyID:$("#products").data("familyid"),productID:t});$.post(ajaxUrl+"productFunctions/get-product-data-ajax",e,function(e){var a=JSON.parse(e);setTimeout(function(){var t=$("div#product").parent("div"),e=(setTimeout(function(){$("div#product").remove(),t.prepend(a.productData.main),C.productThumbnails(),$.reel.scan(),C.currentlyShowingImage="main-image";var e=$("ul#img-options").children("li").first();1==e.data("has360")?e.show():e.hide();$("div.audio-wrap").append(a.productData.audio)},100),C.$productSpecs.find("h3").parent("div")),e=(e.children("h3").remove(),e.append(a.productData.product_title),55<C.originalOutputTitle.length&&e.children("h3").addClass("smaller-title"),$("#features-benefits ul li").remove(),$("#features-benefits ul").prepend(a.productData.product_specific_fbs),$("ul.specs").children("li").remove(),$("ul.specs").append(a.productData.tech_specs),$("ul.bulb-application").children("li").remove(),$("ul.bulb-application").append(a.productData.application),$("ul.bulb-x-ref").children("li").remove(),$("ul.bulb-x-ref").append(a.productData.cross_ref),$("div.replacements-container"));e.children("div.owl-carousel").remove(),e.prepend(a.productData.accessories),C.accessoriesCarousel(),$("div#related-info").children().remove(),$("div#related-info").append(a.productData.related_info),$("ul#related-information-tabs li").first().children("a").trigger("click"),$("#features > .content-wrapper > div.col-12 > div.led-variant").remove(),$("#features > .content-wrapper > div.col-12").prepend(a.productData.led_variant),$("#ajax-image-loader").hide(),C.$productSpecs.removeClass("loading")},1e3)})})},accessoriesCarousel:function(){$(".accessories-carousel").owlCarousel({items:3,startPosition:0,nav:!0,loop:3<$(".accessories-carousel").length,margin:20,slideTransition:"linear",navText:['<i class="material-icons">keyboard_arrow_left</i>','<i class="material-icons">keyboard_arrow_right</i>'],stagePadding:10,responsiveClass:!0,responsive:{0:{items:1,nav:!1,center:!0,stagePadding:90},425:{items:1,nav:!1,center:!0,stagePadding:120},500:{items:1,nav:!1,center:!0,stagePadding:125},576:{items:2,nav:!0},768:{items:2,nav:!0},992:{items:3,nav:!0},1200:{items:3,nav:!0}}})},removeHoverSelection:function(){C.$products.find("ul li a div.row.selected").removeClass("selected")},longProductNumbers:function(){var a=!1,e=$("#products ul li").find("h6");$.each(e,function(e,t){11<$(this).text().length&&(a=!0)}),a&&$("#products ul li").removeClass("col-lg-4").removeClass("col-xxl-4").addClass("col-lg-6")},productsCompare:function(){this.setCheckboxStates(),window.mobilecheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t},window.addEventListener("resize",function(){window.innerHeight>window.innerWidth&&1==window.mobilecheck()?(document.getElementById("compare-body").style.display="none",document.getElementById("quickly-compare").style.display="none",document.getElementById("compare-body-mobile-vert").style.display="block"):(document.getElementById("compare-body-mobile-vert").style.display="none",document.getElementById("quickly-compare").style.display="inline",document.getElementById("compare-body").style.display="block")},!1);var t=$("section#products-compare-modal");$("section#compare-products");$("button.btn-show-compare").off("click"),$("button.btn-show-compare").on("click",function(){t.hasClass("open")?(t.removeClass("open"),t.removeClass("close"),$("body").removeClass("noscroll")):(C.resetModal(),t.addClass("open"),t.removeClass("close"),$("body").addClass("noscroll"),window.innerHeight>window.innerWidth&&1==window.mobilecheck()&&(document.getElementById("compare-body").style.display="none",document.getElementById("quickly-compare").style.display="none",document.getElementById("compare-body-mobile-vert").style.display="block")),C.productsCountUpdate()}),$("button.btn-hide-compare").off("click"),$("button.btn-hide-compare").on("click",function(){t.hasClass("open")?(t.removeClass("open"),t.removeClass("fully-open"),t.removeClass("close"),$("body").removeClass("noscroll"),"block"==$("#comparison-table").attr("display")&&$("#comparison-table").slideDown(200)):t.addClass("open"),C.productsCountUpdate()}),$(".btn-compare.main").off("click"),$(".btn-compare.main").on("click",function(e){e.preventDefault(),C.showBusy(),$(this).fadeOut("fast").removeClass("d-block"),C.updateTableMarkup(),$(".btn-compare").hide(),t.addClass("fully-open"),$("#comparison-table tbody").slideDown(200)}),$("button.btn-clear-compare").off("click"),$("button.btn-clear-compare").on("click",function(e){e.preventDefault(),$("#compare-products").data("productscount",0),C.compareIDs=[],C.setCheckboxStates(),C.productsCountUpdate(),C.updateCompareSelection()}),this.checkboxEvents(),this.removeProductItem()},showBusy:function(){$("div.busy-compare").fadeIn(300)},hideBusy:function(){$("div.busy-compare").fadeOut(300)},removeProductItem:function(){var e=$("#comparison-table th");e.find("i.material-icons").off(),e.find("i.material-icons").on("click",function(e){$(this).closest("th").slideUp(300,function(){setTimeout(function(){$(this).closest("th").remove()},200)});var t=$(this).closest("th").data("productid"),a=$.inArray(t,C.compareIDs);~a&&C.compareIDs.splice(a,1),1===C.compareIDs.length&&C.resetModal(),0===C.compareIDs.length&&(C.resetModal(),$("body").removeClass("noscroll"),$("section#products-compare-modal").removeClass("open"),$("section#products-compare-modal").removeClass("fully-open"),$("section#products-compare-modal").removeClass("close"),$("body").removeClass("noscroll")),setTimeout(function(){C.updateCompareSelection(),$("#comparison-table").find(".col-pn-"+t).fadeOut(200)},300),setTimeout(function(){C.setCheckboxStates()},1e3)})},resetModal:function(){$("div#comparison-table tbody").hide(),1<C.compareIDs.length&&$("button.btn-compare").show()},productsCountUpdate:function(){var e=$("#compare-products"),t=e.data("productscount"),e=($("span#compare-count").text(t),0<t?e.slideDown(300):e.slideUp(300),1<t?"Products":"Product");$("span#plural-products").text(e),1<t?($(".btn-compare").removeClass("d-none").addClass("d-block"),$(".txt-compare").removeClass("d-block").addClass("d-none")):($(".btn-compare").removeClass("d-block").addClass("d-none"),$(".txt-compare").removeClass("d-none").addClass("d-block"))},checkboxEvents:function(){var e=$('div#products ul li input[type="checkbox"], input.compare-cb, div.compare-checkbox-f-all input.compare-cb');e.off("click"),e.on("click",function(){var e,t=parseInt($(this).val());if($(this).is(":checked")){if(5<=$("#compare-products").data("productscount"))return e=$("<p>").text("Limit reached!").attr("class","product-limit-reached").css({position:"absolute",fontSize:"12px",color:"#E73939"}).delay(1e3).fadeOut(100,function(){e.remove()}),$(this).parent().append(e),!1;$(this).attr("checked","checked"),$(this).prop({checked:!0}),C.compareIDs.push(t)}else{$(this).removeAttr("checked"),$(this).prop({checked:!1});t=$.inArray(t,C.compareIDs);~t&&C.compareIDs.splice(t,1)}C.updateCompareSelection()})},setCheckboxStates:function(){var e=$('#products ul li input[type="checkbox"], input.compare-cb');$.each(e,function(e,t){var a=$(this),n=parseInt($(this).val());-1!==$.inArray(n,C.compareIDs)?(a.prop({checked:!0}),a.attr("checked","checked")):(a.prop({checked:!1}),a.removeAttr("checked"))})},updateCompareSelection:function(){var e={csrf_grote_token:$("#csrf-products").val(),productIDs:C.compareIDs};$.post(ajaxUrl+"/ProductFunctions/set-products-comparision-cookie",e,function(e){e=JSON.parse(e);$("#compare-products").data("productscount",e.productsCount),C.productsCountUpdate(),$("#comparison-table thead").children("tr").remove(),$("#comparison-table thead").append(e.markup),C.removeProductItem()})},updateTableMarkup:function(){var e={csrf_grote_token:$("#csrf-products").val()};$.post(ajaxUrl+"/ProductFunctions/get-table-attributes",e,function(e){e=JSON.parse(e);"success"===e.status&&($("#comparison-table table tbody").children().remove(),$("#comparison-table table tbody").append(e.markup),C.hideBusy(),$("button.btn-download-pdf").fadeIn(200))})},downloadPdf:function(){var e={csrf_grote_token:$("#csrf-products").val()};$.post(ajaxUrl+"/ProductFunctions/download-pdf-compare",e,function(e){JSON.parse(e)})},productReviewStars:function(){$("div#rate-stars i.fa-star").on("click",function(){var e=$(this).data("rating"),t=$("div#rate-stars i.fa-star");t.removeClass("fas"),t.removeClass("far");for(var a=1;a<=5;a++)a<=e?t.eq(a-1).addClass("fas"):t.eq(a-1).addClass("far");$("#user-rating").val(e)})},expandReviews:function(){$("#expand-review-form").on("click",function(e){e.preventDefault(),$("#leave-review-form").is(":visible")?$("#leave-review-form").slideUp(300):$("#leave-review-form").slideDown(300)})},submitProductReview:function(){var t=$("#leave-review-form"),n=$("#review-ajax-loader");t.on("submit",function(e){e.preventDefault(),n.show();var a=$("#review-output-responder"),e={csrf_grote_token:$("#csrf-review").val(),productID:$("#product-number-select").val(),uFirstName:$("#first-name").val(),uLastName:$("#last-name").val(),uEmail:$("#email-address").val(),uReview:$("#review").val(),uRating:$("#user-rating").val(),recaptcha:$("#g-recaptcha-response").val(),marketing:0,consent:0};$("#consent").is(":checked")&&(e.consent=1),$("input#marketing").is(":checked")&&(e.marketing=1),$.post(ajaxUrl+"UserActions/post-review",e,function(e){e=JSON.parse(e);a.children("p").remove(),"success"===e.status?(a.append("<p>"+e.message+"</p>"),a.css({"background-color":"rgb(111, 222, 110)",color:"#fff"}),t.find("input#submit-review").slideUp(100)):$.each(e.message,function(e,t){a.css("background-color","#FF867C"),a.append("<p>"+t+"</p>")}),a.slideDown(200,function(){n.hide()})})})},onReady:function(){($("body").hasClass("family-template")||$("body").hasClass("family-template-secondary")||$("body").hasClass("tpl-replacement-bulbs"))&&(C.setHover(),C.setProductClicks(),C.productThumbnails(),C.replacementsNext(),C.productReviewStars(),C.accessoriesCarousel(),C.submitProductReview(),C.expandReviews(),C.productsCompare(),C.longProductNumbers()),($("body").hasClass("filter-all-products")||$("body").hasClass("sub-category-template"))&&C.productsCompare()}}),y={currentPage:0,filters:[],productTable:$("table.table.products"),loadMoreTableProductsEvents:function(){$("button.show-more-table-products").on("click",function(e){e.preventDefault(),$("#ajax-image-loader").show(),y.currentPage++,y.makeAjaxRequest("append")})},makeAjaxRequest:function(t){var e={csrf_grote_token:$("#csrf-products").val(),familyID:$("table.table.products").data("familyid"),pageNumber:y.currentPage,attributes:y.filters};$.post(ajaxUrl+"/productFunctions/get-table-products",e,function(e){e=JSON.parse(e);"success"===e.status&&($("table.table.products").children("tbody").append(e.markup),y.updateProductsCount(e.productCount,e.totalRecords,t),setTimeout(function(){$("#ajax-image-loader").fadeOut(500)},300))})},updateProductsCount:function(e,t,a){var n=parseInt($("span#current-products-count").text()),i=(e=parseInt(e),t=parseInt(t),e);"reset"===a&&$("#current-products-count").text(e),"append"===a&&(i=n+e,$("#current-products-count").text(i)),$("span#total-products").text(t),t<=i?$("button.show-more-table-products").hide():$("button.show-more-table-products").show()},changeFilters:function(){$("div.filter-options").find("select").on("change",function(){$("#ajax-image-loader").show(),y.filters=[],$("div.filter-options").find("select").each(function(e,t){"0"!==$(this).val()&&y.filters.push($(this).val())}),y.currentPage=0,y.clearExistingProducts(),y.makeAjaxRequest("reset")})},clearAllFilters:function(){$("button#reset-filters").on("click",function(e){e.preventDefault(),$("#ajax-image-loader").show(),$("div.filter-options").find("select").each(function(e,t){$(this).val(0)}),y.filters=[],y.currentPage=0,y.clearExistingProducts(),y.makeAjaxRequest("reset")})},clearExistingProducts:function(){$("table.table.products tbody").find("td").remove()},onReady:function(){this.loadMoreTableProductsEvents(),this.changeFilters(),this.clearAllFilters(),C.productThumbnails(),($("body").hasClass("alternate-template")||$("body").hasClass("tpl-replacement-bulbs"))&&(C.setHover(),C.setProductClicks(),C.productThumbnails()),($("body").hasClass("family-template-secondary")||$("body").hasClass("tpl-replacement-lenses"))&&$("button#reset-filters").trigger("click"),$("#view-all-family").click(function(e){e.preventDefault(),x("all-products")})}},w=(C.onReady(),y.onReady(),$("form#calculation-roi").submit(function(e){function t(e){return"$"+e.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function a(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}e.preventDefault();var e=(calculateRoi={numTrailers:parseInt($("#trailers_number").val()),avTrailerLife:parseInt($("#trailers_life").val()),numIncanLamps:parseInt($("#incandescent_number").val()),incanPrice:parseFloat($("#incandescent_price").val()).toFixed(2),ledPrice:parseFloat($("#led_price").val()).toFixed(2),incanReplCycle:parseInt($("#incandescent_replacement_cycle").val()),maintenanceTimeLampRep:parseFloat($("#maintenance_lamp_rep_time").val()).toFixed(2),avMaintenanceCPH:parseFloat($("#maintenance_cost_per_hour").val()).toFixed(2),avDowntimeDuringRep:parseFloat($("#avg_downtime").val()),avDowntimeCPH:parseFloat($("#avg_downtime_cost_hour").val()).toFixed(2),numReplacementsOverTrailerLife:function(){return this.avTrailerLife/this.incanReplCycle},costIncPerTrailer:function(){return this.incanPrice*this.numIncanLamps},costIncPerFleet:function(){return this.costIncPerTrailer()*this.numTrailers},costLedPerTrailer:function(){return this.ledPrice*this.numIncanLamps},costLedPerFleet:function(){return this.costLedPerTrailer()*this.numTrailers},addtlInvPerLamp:function(){return this.ledPrice-this.incanPrice},maintenanceTimeLampRepInHours:function(){return this.maintenanceTimeLampRep/60},avDowntimeDuringRepInHours:function(){return this.avDowntimeDuringRep/60},lifetimeMaintenanceCost:function(){return this.maintenanceTimeLampRepInHours()*this.avMaintenanceCPH*this.numReplacementsOverTrailerLife()},lifetimeDowntimeCost:function(){return this.avDowntimeDuringRepInHours()*this.avDowntimeCPH*this.numReplacementsOverTrailerLife()},incanReplacementProductCosts:function(){return this.numReplacementsOverTrailerLife()*this.incanPrice},totalIncandCosts:function(){return this.lifetimeMaintenanceCost()+this.lifetimeDowntimeCost()+this.incanReplacementProductCosts()},totalCostsIncProg:function(){return this.totalIncandCosts()},totalCostsPerYear:function(){return this.totalCostsIncProg()/parseFloat(this.avTrailerLife)},costLed:function(){return parseFloat(this.ledPrice)},costLedInstallation:function(){return this.maintenanceTimeLampRepInHours()*parseFloat(this.avMaintenanceCPH)},totalCostLedChangeBeforeDowntime:function(){return this.costLed()+this.costLedInstallation()},costDowntime:function(){return parseFloat(this.avDowntimeCPH)*this.avDowntimeDuringRepInHours()},totalCostsLedChangeover:function(){return this.totalCostLedChangeBeforeDowntime()+this.costDowntime()},savingsOverTrailerLife:function(){return this.totalIncandCosts()-this.totalCostsLedChangeover()},savingsPerYear:function(){return this.savingsOverTrailerLife()/parseFloat(this.avTrailerLife)},totalRoi:function(){return this.savingsOverTrailerLife()/this.totalCostsLedChangeover()},paybackPeriod:function(){return this.totalCostsLedChangeover()/this.savingsPerYear()}}).numReplacementsOverTrailerLife(),n=calculateRoi.numReplacementsOverTrailerLife()*calculateRoi.numIncanLamps,i=calculateRoi.numReplacementsOverTrailerLife()*calculateRoi.numIncanLamps*calculateRoi.numTrailers;$("#result-replacements-over-trailer-lifex1").text(a(e)),$("#result-replacements-over-trailer-lifextrailer").text(a(n)),$("#result-replacements-over-trailer-lifexfleet").text(a(i)),e=calculateRoi.lifetimeMaintenanceCost(),$("#result-lifetime-maintenance-costx1").text(t(e)),e=calculateRoi.lifetimeMaintenanceCost()*calculateRoi.numIncanLamps,$("#result-lifetime-maintenance-costxtrailer").text(t(e)),e=calculateRoi.lifetimeMaintenanceCost()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#result-lifetime-maintenance-costxfleet").text(t(e)),e=calculateRoi.lifetimeDowntimeCost(),$("#result-downtime-costsx1").text(t(e)),e=calculateRoi.lifetimeDowntimeCost()*calculateRoi.numIncanLamps,$("#result-downtime-costsxtrailer").text(t(e)),e=calculateRoi.lifetimeDowntimeCost()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#result-downtime-costsxfleet").text(t(e)),e=calculateRoi.incanReplacementProductCosts(),$("#result-incan-costsx1").text(t(e)),e=calculateRoi.incanReplacementProductCosts()*calculateRoi.numIncanLamps,$("#result-incan-costsxtrailer").text(t(e)),e=calculateRoi.incanReplacementProductCosts().toFixed(2)*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#result-incan-costsxfleet").text(t(e)),e=calculateRoi.totalIncandCosts(),$("#result-total-incan-costsx1").text(t(e)),e=calculateRoi.totalIncandCosts()*calculateRoi.numIncanLamps,$("#result-total-incan-costsxtrailer").text(t(e)),e=calculateRoi.totalIncandCosts()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#result-total-incan-costsxfleet").text(t(e)),e=calculateRoi.totalCostsIncProg(),n=calculateRoi.totalCostsIncProg()*calculateRoi.numIncanLamps,i=calculateRoi.totalCostsIncProg()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#total-costs-inc-progx1").text(t(e)),$("#total-costs-inc-progxtrailer").text(t(n)),$("#total-costs-inc-progxfleet").text(t(i)),e=calculateRoi.totalCostsPerYear(),n=calculateRoi.totalCostsPerYear()*calculateRoi.numIncanLamps,i=calculateRoi.totalCostsPerYear()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#total-costs-per-yearx1").text(t(e)),$("#total-costs-per-yearxtrailer").text(t(n)),$("#total-costs-per-yearxfleet").text(t(i)),e=calculateRoi.costLed(),n=calculateRoi.costLed()*calculateRoi.numIncanLamps,i=calculateRoi.costLed()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#costs-ledx1").text(t(e)),$("#costs-ledxtrailer").text(t(n)),$("#costs-ledxfleet").text(t(i)),e=calculateRoi.costLedInstallation(),n=calculateRoi.costLedInstallation()*calculateRoi.numIncanLamps,i=calculateRoi.costLedInstallation()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#costs-led-instx1").text(t(e)),$("#costs-led-instxtrailer").text(t(n)),$("#costs-led-instxfleet").text(t(i)),e=calculateRoi.totalCostLedChangeBeforeDowntime(),n=calculateRoi.totalCostLedChangeBeforeDowntime()*calculateRoi.numIncanLamps,i=calculateRoi.totalCostLedChangeBeforeDowntime()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#total-cost-led-changex1").text(t(e)),$("#total-cost-led-changextrailer").text(t(n)),$("#total-cost-led-changexfleet").text(t(i)),e=calculateRoi.costDowntime(),n=calculateRoi.costDowntime()*calculateRoi.numIncanLamps,i=calculateRoi.costDowntime()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#cost-downtimex1").text(t(e)),$("#cost-downtimextrailer").text(t(n)),$("#cost-downtimexfleet").text(t(i)),e=calculateRoi.totalCostsLedChangeover(),n=calculateRoi.totalCostsLedChangeover()*calculateRoi.numIncanLamps,i=calculateRoi.totalCostsLedChangeover()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#total-costs-led-changex1").text(t(e)),$("#total-costs-led-changextrailer").text(t(n)),$("#total-costs-led-changexfleet").text(t(i)),e=calculateRoi.savingsOverTrailerLife(),n=calculateRoi.savingsOverTrailerLife()*calculateRoi.numIncanLamps,i=calculateRoi.savingsOverTrailerLife()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#savings-trailer-lifex1").text(t(e)),$("#savings-trailer-lifextrailer").text(t(n)),$("#savings-trailer-lifexfleet").text(t(i)),e=calculateRoi.savingsPerYear(),n=calculateRoi.savingsPerYear()*calculateRoi.numIncanLamps,i=calculateRoi.savingsPerYear()*calculateRoi.numIncanLamps*calculateRoi.numTrailers,$("#savings-per-yearx1").text(t(e)),$("#savings-per-yearxtrailer").text(t(n)),$("#savings-per-yearxfleet").text(t(i)),e=calculateRoi.totalRoi(),$("#total-roix1").text(100*e.toFixed(2)+"%"),$("#total-roixtrailer").text(100*e.toFixed(2)+"%"),$("#total-roixfleet").text(100*e.toFixed(2)+"%"),e=calculateRoi.paybackPeriod(),$("#payback-periodx1").text(e.toFixed(2)+" Years"),$("#payback-periodxtrailer").text(e.toFixed(2)+" Years"),$("#payback-periodxfleet").text(e.toFixed(2)+" Years"),$("#roi-results-incandescent").removeClass("d-none").addClass("d-block"),$("#roi-results-grote-savings").removeClass("d-none").addClass("d-block"),x("calc-results")}),{startVideoID:null,init:function(){var a=0,e=$("#grotetv").data("videolink");$("#grotetv .video").each(function(){a++,$(this).find("a").click(function(e){e.preventDefault();e=$(this).data("vid"),e=w.getVideoId(e);w.loadVideo(e)});var e=$(this).find("img").data("vid"),e=w.getVideoId(e),t=w.getThumb(e);$(this).find("img").attr("src",t),1==a&&(w.startVideoID=e)}),0<e.length?(e=$('a[data-vid$="'+e+'"]'),0<(e=w.getVideoId(e.attr("data-vid"))).length?w.loadVideo(e,!1):w.loadVideo(vidId,!1)):w.loadVideo(w.startVideoID,!1)},getThumb:function(e,t){return"small"===(t=null===t?"big":t)?"https://i1.ytimg.com/vi/"+e+"/2.jpg":"https://i.ytimg.com/vi/"+e+"/mqdefault.jpg"},loadVideo:function(e,t){t=void 0===t||t,$("#grotetv .main-vid").find("iframe").attr("src","https://www.youtube.com/embed/"+e),t&&x("main-video-start")},getVideoId:function(e){return e.substring(e.lastIndexOf("/")+1)}});$("#grotetv").ready(function(){$("body").hasClass("grote-tv-template")&&w.init()}),$("ul.lamplighters-nav li a").on("click",function(e){e.preventDefault();e=$("ul.lamplighters-nav li a").index(this),e=$(this).closest("div.row").nextAll().eq(e);$([document.documentElement,document.body]).animate({scrollTop:e.offset().top-160},600)}),$("ul.lamplighters-nav li a").on("click",function(e){e.preventDefault();e=$("ul.lamplighters-nav li a").index(this),e=$(this).closest("div.row").nextAll().eq(e);$([document.documentElement,document.body]).animate({scrollTop:e.offset().top-160},600)}),$("a#foursee-faq").on("click",function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$("section.foursee-faq").offset().top-160},600)});var k=function(){$("ul#terms").listnav({includeNums:!1,noMatchText:"There are no matching entries.",showCounts:!1})},x=($("#dictionary").ready(function(){k()}),function(e){e=$("a[name='"+e+"']");$("html,body").animate({scrollTop:e.offset().top-50},"slow")}),_=($("#resourcesDropdown ul li a:contains(Live Chat)").on("click",function(e){e.preventDefault(),mavenoid.push({event:"assistant-open"})}),{form:$("#contact-form, #general-form, #patent-form, #foursee-form"),controller:ajaxUrl+"UserActions/process-web-form",outputContainer:$("#form-output-responder"),postData:null,events:function(){_.form.on("submit",function(e){e.preventDefault(),$("div.submit-container").append("<input>").attr("name","recaptcha").val($("#g-recaptcha-response").val());var t=$(this).find("#form-output-responder"),e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-forms").val()),e=(_.form.append(e),$("<input>").attr("type","hidden").attr("name","ct_language").val($("html").attr("lang")));_.form.append(e),_.postData=$(this).serialize(),$.post(_.controller,_.postData,function(e){e=JSON.parse(e);"success"===e.status?(t.css("border","1px solid #6CEFB7"),_.form.find('input[type="submit"]').hide(),"uvc"===_.form.find('input[name="form_type"]').val()&&($("#extra-modal-info div").append(e.md),$("#extra-modal-info").slideDown(200)),"aux_strobe"===_.form.find('input[name="form_type"]').val()&&($("#extra-modal-info div").append(e.md),$("#extra-modal-info").slideDown(200)),"6_inch_oval_strobe"===_.form.find('input[name="form_type"]').val()&&_.form.find('input[type="submit"]').hide()):t.css("border","1px solid #F15B5B"),t.children("p").remove(),t.append(e.message),t.slideDown(200)})}),$("#switch-contact-page").on("change",function(){var e=$(this).val();$("div#blocks").children("div").hide(),$("div#blocks").children("div#"+e).show()});var e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-site-search").val());$("#site-search-form").append(e)},extraForm:function(){$("#extra-modal-info i.fa-window-close").on("click",function(e){e.preventDefault(),$("#extra-modal-info").slideUp(200)})},uvcAddon:function(){},onReady:function(){this.events(),this.extraForm()}}),I=(_.onReady(),{form:$("#aapex-form"),controller:ajaxUrl+"UserActions/landing-page-processing",outputContainer:$("#form-output-responder"),postData:null,events:function(){I.form.on("submit",function(e){e.preventDefault(),$("div.submit-container").append("<input>").attr("name","recaptcha").val($("#g-recaptcha-response").val());var t=$(this).find("#form-output-responder"),e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-forms").val()),e=(I.form.append(e),$("<input>").attr("type","hidden").attr("name","ct_language").val($("html").attr("lang")));I.form.append(e),I.postData=$(this).serialize(),$.post(I.controller,I.postData,function(e){e=JSON.parse(e);"success"===e.status?(t.css("border","1px solid #6CEFB7"),I.form.find('input[type="submit"]').hide()):t.css("border","1px solid #F15B5B"),t.children("p").remove(),t.append(e.message),t.slideDown(200)})});var e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-site-search").val());$("#site-search-form").append(e),$("#show-aapex-terms").on("click",function(e){e.preventDefault(),$("div.aapex-content-wrapper").slideToggle(300)})},onReady:function(){this.events()}}),D=(I.onReady(),{form:$("#tmc-form"),controller:ajaxUrl+"UserActions/tmc-processing",outputContainer:$("#form-output-responder"),postData:null,events:function(){$("#tmc-form div.intro-radios input").on("change",function(e){var t=$(this).val();console.log(t),"press"===t?$("div.only-customer").hide():$("div.only-customer").show()}),$("#tmc-form #ct-participants-count").on("change",function(){1<$(this).val()?$(".participants-names-group").slideDown(200):$(".participants-names-group").slideUp(200)}),D.form.on("submit",function(e){e.preventDefault(),$("div.submit-container").append("<input>").attr("name","recaptcha").val($("#g-recaptcha-response").val());var t=$(this).find("#form-output-responder"),e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-forms").val()),e=(D.form.append(e),$("<input>").attr("type","hidden").attr("name","ct_language").val($("html").attr("lang")));D.form.append(e),D.postData=$(this).serialize(),$.post(D.controller,D.postData,function(e){e=JSON.parse(e);"success"===e.status?(t.css("border","1px solid #6CEFB7"),D.form.find('input[type="submit"]').hide()):t.css("border","1px solid #F15B5B"),t.children("p").remove(),t.append(e.message),t.slideDown(200)})});var e=$("<input>").attr("type","hidden").attr("name","csrf_grote_token").val($("#csrf-site-search").val());$("#site-search-form").append(e)},onReady:function(){this.events()}}),R=(D.onReady(),{form:$("#submit-issue-form"),loader:$("#issue-ajax-loader"),formSubmit:function(){$("form#submit-issue-form").on("submit",function(e){e.preventDefault(),R.loader.show();var e=$("input#screenshot").prop("files")[0],t=new FormData;t.append("name",$("#name").val()),t.append("email",$("#email").val()),t.append("position",$("#position").val()),t.append("type",$("#issue-type").val()),t.append("detail",$("#issue-detail").val()),t.append("title",$("#issue-title").val()),t.append("url",window.location.href),t.append("screenshot",e),t.append("csrf_grote_token",$("#issue-csrf").val()),$.ajax({type:"POST",url:ajaxUrl+"UserActions/submit-issue",dataType:"text",cache:!1,contentType:!1,processData:!1,data:t,success:function(e){var e=JSON.parse(e),t=($("div.submit-output p").remove(),$("<p>").html(e.message));"success"===e.status?(t.css("color","#239b56"),R.form.find('input[type="submit"]').hide()):t.css("color","#ec7063"),$("div.submit-output p").hide(),$("div.submit-output").append(t),$("div.submit-output p").hide(),$("div.submit-output p").slideDown(200),R.loader.hide(),setTimeout(function(){$("button.btn-issue").trigger("click")},3e3)}})})}});R.formSubmit();var e=function(){$("#ez-input").on("keyup",function(e){var t="find"===$("#lookup-form").data("type")?"ez-find":"ez-test",t=baseUrl+t+"/"+$(this).val();$(this).siblings("a").attr("href",t)}),$("#lookup-form").on("submit",function(e){e.preventDefault(),$("#lookup-form").find("a").trigger("click")}),C.productThumbnails()},t=function(){var e=$("ul#product-thumbnails li");e.off(),e.on("click",function(e){e.preventDefault();var t=$(this).children("img").data("imagetype");$("#featured-imagery > div").fadeOut(350,function(){setTimeout(function(){$("#featured-imagery > div#"+t).fadeIn(350,function(){})},350)})})},T=function(){var t=$("#lookup-form");!1===t.data("hasproduct")&&$("#lookup-form").slideDown(500),!1===t.data("isfound")&&$("#lookup-form").slideDown(500),$("#ez-logo").on("click",function(e){e.preventDefault(),t.is(":visible")?t.slideUp(200):t.slideDown(200)})},L={isLoaded:!1,loadDistributors:function(){$("div.distributors-cta a").on("click",function(e){e.preventDefault(),!1===L.isLoaded&&(e={csrf_grote_token:$("#csrf-products").val()},$.post(ajaxUrl+"DistributorsAPI/load-panel",e,function(e){e=JSON.parse(e),($("body").hasClass("family-template-secondary")&&$("body").hasClass("default-template")||$("body").hasClass("tpl-replacement-lenses")||$("body").hasClass("tpl-replacement-bulbs")?$("#distributor-insert"):$("#related")).before(e.panel),$("section#distributors-section-container").slideDown(200),e=$("<script>");e.attr("src",baseUrl+"js/frontend/distributors.js"),e.async=!0,$("body").append(e),L.isLoaded=!0}))})}};$("body").hasClass("ez-find-template")&&(e(),t(),T()),L.loadDistributors();$(".tab-content-system");$("ul#country li a").on("click",function(e){e.preventDefault(),$("ul#country li a").removeClass("active"),$(this).addClass("active");var t=$(this).data("country");$("div.content-tab").fadeOut(300,function(){setTimeout(function(){$("div.content-tab#"+t).fadeIn(300)},300)})}),$("#np-date-range").on("change",function(e){e.preventDefault();e={csrf_grote_token:$("#csrf-site-search").val(),range:$(this).val()};$.post(ajaxUrl+"/ProductFunctions/get-new-products-ajax",e,function(e){var t=JSON.parse(e);"success"===t.status&&$("div.append-container").fadeOut(300,function(){$("#ajax-np-loader").show(),$("div.new-products-template").remove(),$("#tpl-new-products").addClass("fadeout"),setTimeout(function(){$("div.append-container").append(t.markup),$("div.append-container").fadeIn(300),$("#tpl-new-products").removeClass("fadeout"),$("#ajax-np-loader").hide()},1e3)})})}),$("body").hasClass("tpl-foursee")&&$("#increase-roi").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:$("#foursee-embed-container").offset().top-70},"slow")}),$("body").hasClass("tpl-foursee")&&$("#increase-roi").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:$("#foursee-embed-container").offset().top-70},"slow")}),$("nav.headlamp-nav-links a").on("click",function(e){var t=$(this).attr("href");console.log(t),t.length&&(e.preventDefault(),$("html, body").stop().animate({scrollTop:$(t).offset().top-120},1e3))}),$("#layerslider").css("opacity",1),$("#slider-spinner").css("opacity",0),"#live-chat"===window.location.hash&&setTimeout(function(){var e,t=function(){$zopim.livechat.window.toggle()};"undefined"!=typeof $zopim&&$zopim.livechat&&$zopim.livechat.window?t():e=setInterval(function(){"undefined"!=typeof $zopim&&$zopim.livechat&&$zopim.livechat.window&&(clearInterval(e),t())},100)},1e3)}),function(){function e(e){this.element=e,this.blocks=this.element.getElementsByClassName("timeline-block"),this.images=this.element.getElementsByClassName("timeline-img"),this.contents=this.element.getElementsByClassName("timeline-content"),this.offset=.8,this.hideBlocks()}e.prototype.hideBlocks=function(){for(var e=0;e<this.blocks.length;e++)this.blocks[e].getBoundingClientRect().top>window.innerHeight*this.offset&&(this.images[e].classList.add("timeline-img-hidden"),this.contents[e].classList.add("timeline-content-hidden"))},e.prototype.showBlocks=function(){for(var e=this,t=0;t<this.blocks.length;t++)e.contents[t].classList.contains("timeline-content-hidden")&&e.blocks[t].getBoundingClientRect().top<=window.innerHeight*e.offset&&(e.images[t].classList.add("timeline-img-bounce-in"),e.contents[t].classList.add("timeline-content-bounce-in"),e.images[t].classList.remove("timeline-img-hidden"),e.contents[t].classList.remove("timeline-content-hidden"))};var t=document.getElementsByClassName("js-timeline"),a=[],n=!1;if(0<t.length){for(var i=0;i<t.length;i++)a.push(new e(t[i]));window.addEventListener("scroll",function(e){n||(n=!0,window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,250))})}function s(){a.forEach(function(e){e.showBlocks()}),n=!1}}();